<div class="container">
  <header class="text-center mt-3 mb-3">
    <h1>Calculadora de Salário Líquido</h1>
    <p>Descubra quanto você receberá após os descontos</p>
  </header>

  <main>
    <section class="calculator mb-3">
      <form [formGroup]="salarioForm" (ngSubmit)="calcularSalario()">
        <div class="form-group">
          <label for="salarioBruto">Salário Bruto: <span class="info-tooltip" (mouseenter)="onInfoHover('salario_bruto')" title="Valor total do seu salário antes dos descontos">[?]</span></label>
          <input type="text" id="salarioBruto" formControlName="salarioBruto" class="form-control"
                 placeholder="R$ 0,00"
                 (input)="formatarValor('salarioBruto')"
                 (blur)="formatarValor('salarioBruto'); onBlurField('salarioBruto')"
                 (focus)="onFocusField('salarioBruto')">
        </div>

        <div class="form-group">
          <label for="numeroDependentes">Número de Dependentes: <span class="info-tooltip" (mouseenter)="onInfoHover('dependentes')" title="Quantidade de dependentes para dedução do Imposto de Renda">[?]</span></label>
          <input type="number" id="numeroDependentes" formControlName="numeroDependentes" class="form-control" min="0"
                 (blur)="onBlurField('numeroDependentes')"
                 (focus)="onFocusField('numeroDependentes')">
        </div>

        <div class="form-group">
          <label for="outrosBeneficios">Outros Benefícios: <span class="info-tooltip" (mouseenter)="onInfoHover('beneficios')" title="Valor total de outros benefícios não tributáveis (ex: vale-refeição, vale-transporte)">[?]</span></label>
          <input type="text" id="outrosBeneficios" formControlName="outrosBeneficios" class="form-control"
                 placeholder="R$ 0,00"
                 (input)="formatarValor('outrosBeneficios')"
                 (blur)="formatarValor('outrosBeneficios'); onBlurField('outrosBeneficios')"
                 (focus)="onFocusField('outrosBeneficios')">
        </div>

        <div class="form-group">
          <label for="outrosDescontos">Outros Descontos: <span class="info-tooltip" (mouseenter)="onInfoHover('descontos')" title="Outros descontos não obrigatórios (ex: plano de saúde, contribuição sindical)">[?]</span></label>
          <input type="text" id="outrosDescontos" formControlName="outrosDescontos" class="form-control"
                 placeholder="R$ 0,00"
                 (input)="formatarValor('outrosDescontos')"
                 (blur)="formatarValor('outrosDescontos'); onBlurField('outrosDescontos')"
                 (focus)="onFocusField('outrosDescontos')">
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="salarioForm.invalid">Calcular Salário</button>
      </form>
    </section>

    <section *ngIf="resultado" class="result mb-3">
      <h2>Resultado do Cálculo</h2>
      <div class="result-grid">
        <div class="result-item">
          <h3>Salário Bruto</h3>
          <p>{{ resultado.bruto | moneyFormat }}</p>
        </div>
        <div class="result-item">
          <h3>Salário Líquido</h3>
          <p class="highlight">{{ resultado.liquido | moneyFormat }}</p>
        </div>
        <div class="result-item">
          <h3>Desconto INSS</h3>
          <p>{{ resultado.descontos.inss | moneyFormat }}</p>
          <small>Faixa: {{ faixaINSS }}</small>
        </div>
        <div class="result-item">
          <h3>Desconto IRRF</h3>
          <p>{{ resultado.descontos.irrf | moneyFormat }}</p>
          <small>Faixa: {{ faixaIRRF }}</small>
        </div>
        <div class="result-item">
          <h3>Outros Descontos</h3>
          <p>{{ resultado.descontos.outrosDescontos | moneyFormat }}</p>
        </div>
        <div class="result-item">
          <h3>Total de Descontos</h3>
          <p>{{ (resultado.descontos.inss + resultado.descontos.irrf + resultado.descontos.outrosDescontos) | moneyFormat }}</p>
        </div>
      </div>
    </section>

    <section class="info mb-3">
      <h2>Informações sobre os Descontos</h2>
      <div class="info-grid">
        <div class="info-item">
          <h3>INSS</h3>
          <p>O INSS (Instituto Nacional do Seguro Social) é uma contribuição obrigatória que varia de 7,5% a 14% do salário, dependendo da faixa salarial.</p>
        </div>
        <div class="info-item">
          <h3>IRRF</h3>
          <p>O IRRF (Imposto de Renda Retido na Fonte) é calculado sobre o salário após o desconto do INSS. As alíquotas variam de 0% a 27,5%, dependendo da faixa salarial.</p>
        </div>
        <div class="info-item">
          <h3>Outros Descontos</h3>
          <p>Podem incluir plano de saúde, vale-transporte, contribuição sindical, entre outros descontos específicos do seu contrato de trabalho.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="text-center mt-3">
    <p>&copy; {{ currentYear }} Calculadora de Salário Líquido. Todos os direitos reservados.</p>
  </footer>
</div>
